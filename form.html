<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>M.1-2 Student Form</title>

  <!-- Load Rubik font from Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: "Rubik", sans-serif;
      background: url("https://marketplace.canva.com/EAFZcmTpKas/1/0/1600w/canva-video-intro-portada-fondo-background-simple-rosa-dorado-U93tpA4NMDA.jpg");
      background-size: cover;
      color: white;
      text-align: center;
    }

    input, select, textarea, button {
      font-family: "Rubik", sans-serif;
      font-size: 1em;
      padding: 5px;
      margin-top: 5px;
    }

    form {
      background: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
      padding: 20px;
      border-radius: 10px;
      display: inline-block;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <center>
    <h1>Form for Students in M1-2</h1>
    
    <!-- Student Form -->
    <form id="studentform">
      
      <!-- Name input -->
      <label>Name-Surname<br>
        <input type="text" name="fullname" placeholder="Enter Name Surname" required>
      </label>
      <br><br>

      <!-- Age input -->
      <label>Age<br>
        <input type="number" name="age" min="10" max="18" placeholder="Enter Age" required>
      </label>
      <br><br>

      <!-- Classroom dropdown -->
      <label>Classroom<br>
        <select name="classroom" required>
          <option value="">Select your classroom</option>

          <!-- M1 classrooms -->
          <optgroup label="Grade M1">
            <option value="M101">M101</option>
            <option value="M102">M102</option>
            <option value="M103">M103</option>
            <option value="M104">M104</option>
            <option value="M105">M105</option>
            <option value="M106">M106</option>
            <option value="M107">M107</option>
            <option value="M108">M108</option>
            <option value="M109">M109</option>
            <option value="M110">M110</option>
            <option value="M111">M111</option>
            <option value="M112">M112</option>
            <option value="M113">M113</option>
          </optgroup>

          <!-- M2 classrooms -->
          <optgroup label="Grade M2">
            <option value="M201">M201</option>
            <option value="M202">M202</option>
            <option value="M203">M203</option>
            <option value="M204">M204</option>
            <option value="M205">M205</option>
            <option value="M206">M206</option>
            <option value="M207">M207</option>
            <option value="M208">M208</option>
            <option value="M209">M209</option>
            <option value="M210">M210</option>
            <option value="M211">M211</option>
            <option value="M212">M212</option>
            <option value="M213">M213</option>
          </optgroup>
        </select>
      </label>
      <br><br>

      <!-- Feedback input -->
      <label>Feedback<br>
        <textarea name="comment" rows="4" placeholder="Enter your feedback here..." required></textarea>
      </label>
      <br><br>

      <!-- Submit button -->
      <button type="submit">Send Results</button>
    </form>

    <!-- Response message area -->
    <p id="response"></p>
  </center>

  <script>
    const form = document.getElementById('studentform'); // Form element
    const responseEl = document.getElementById('response'); // Message display area

    form.onsubmit = e => {
      e.preventDefault(); // Prevent default form submit

      // Google Apps Script URL (must be deployed as a Web App)
      const scriptURL = 'https://script.google.com/macros/s/AKfycbwoMzmptzRnN7CK4s4ez1Bsv9Cfwq_1YNMqqGBm-by1myvaYDe7l-kUbAW7SM8FQiM/exec';

      // Send form data using fetch()
      fetch(scriptURL, {
        method: 'POST',
        body: new URLSearchParams(new FormData(form))
      })
      .then(() => {
        // Success message
        responseEl.textContent = "Survey submitted successfully. Thank you!";
        form.reset(); // Reset form after submission
      })
      .catch(() => {
        // Error message
        responseEl.textContent = "Oops! Something went wrong. Please try again.";
      });
    };
  </script>
</body>
</html>
